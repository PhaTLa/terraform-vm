{
  "version": 4,
  "terraform_version": "1.10.3",
  "serial": 228,
  "lineage": "0a1faf44-5b8f-fa5b-64cf-840c5c755937",
  "outputs": {
    "gitlab_ip_address": {
      "value": "Gitlab Server: 192.168.122.198",
      "type": "string"
    },
    "k8s_master_ip_address": {
      "value": "K8s Master: 192.168.122.126",
      "type": "string"
    },
    "k8s_worker_ip_address": {
      "value": "K8s Worker: 192.168.122.96, 192.168.122.133",
      "type": "string"
    },
    "keycloak_server_ip_address": {
      "value": "keycloak Server: 192.168.122.242",
      "type": "string"
    },
    "minio_ip_address": {
      "value": "Minio Server: 192.168.122.227",
      "type": "string"
    }
  },
  "resources": [
    {
      "module": "module.gitlab",
      "mode": "data",
      "type": "template_file",
      "name": "network_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "f9fffade94480c5e803cd15c14b63e65b5cd935e5d408f1bd31edf34c8affe3d",
            "rendered": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "template": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "vars": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.gitlab",
      "mode": "data",
      "type": "template_file",
      "name": "user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "b6b163eaa718ce7e1ea2573bd5a48becf2801b919857a2a3a20410e25074d4f6",
            "rendered": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: gitlab-0\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf",
            "template": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: ${vm_name}-${count_index}\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf",
            "vars": {
              "count_index": "0",
              "vm_name": "gitlab"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.gitlab",
      "mode": "managed",
      "type": "libvirt_cloudinit_disk",
      "name": "commoninit",
      "provider": "module.gitlab.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "/u01/data/virt-u01/commoninit-gitlab-0.iso;975e1e10-582f-4e8e-b29b-09c0fd1813b4",
            "meta_data": "",
            "name": "commoninit-gitlab-0.iso",
            "network_config": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "pool": "virt-u01",
            "user_data": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: gitlab-0\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.gitlab.data.template_file.network_config",
            "module.gitlab.data.template_file.user_data"
          ]
        }
      ]
    },
    {
      "module": "module.gitlab",
      "mode": "managed",
      "type": "libvirt_domain",
      "name": "domain-ubuntu",
      "provider": "module.gitlab.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arch": "x86_64",
            "autostart": false,
            "boot_device": [],
            "cloudinit": "/u01/data/virt-u01/commoninit-gitlab-0.iso;975e1e10-582f-4e8e-b29b-09c0fd1813b4",
            "cmdline": [],
            "console": [
              {
                "source_host": "127.0.0.1",
                "source_path": "",
                "source_service": "0",
                "target_port": "0",
                "target_type": "serial",
                "type": "pty"
              },
              {
                "source_host": "127.0.0.1",
                "source_path": "",
                "source_service": "0",
                "target_port": "1",
                "target_type": "virtio",
                "type": "pty"
              }
            ],
            "coreos_ignition": null,
            "cpu": [
              {
                "mode": "custom"
              }
            ],
            "description": "",
            "disk": [
              {
                "block_device": "",
                "file": "",
                "scsi": false,
                "url": "",
                "volume_id": "/u01/data/virt-u01/gitlab-0-disk",
                "wwn": ""
              }
            ],
            "emulator": "/usr/bin/qemu-system-x86_64",
            "filesystem": [],
            "firmware": null,
            "fw_cfg_name": "opt/com.coreos/config",
            "graphics": [],
            "id": "9c5ee849-81d1-48d2-9dad-f68e6ee2063f",
            "initrd": "",
            "kernel": "",
            "machine": "pc",
            "memory": 16384,
            "metadata": null,
            "name": "gitlab-0",
            "network_interface": [
              {
                "addresses": [
                  "192.168.122.198"
                ],
                "bridge": "",
                "hostname": "gitlab",
                "mac": "52:54:00:76:52:49",
                "macvtap": "",
                "network_id": "b7189a86-a35e-44d9-80e9-3dff3fb23aff",
                "network_name": "default",
                "passthrough": "",
                "vepa": "",
                "wait_for_lease": true
              }
            ],
            "nvram": [],
            "qemu_agent": false,
            "running": true,
            "timeouts": null,
            "tpm": [],
            "type": "kvm",
            "vcpu": 4,
            "video": [],
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.gitlab.data.template_file.network_config",
            "module.gitlab.data.template_file.user_data",
            "module.gitlab.libvirt_cloudinit_disk.commoninit",
            "module.gitlab.libvirt_volume.disk_volume",
            "module.gitlab.libvirt_volume.ubuntu-qcow2"
          ]
        }
      ]
    },
    {
      "module": "module.gitlab",
      "mode": "managed",
      "type": "libvirt_volume",
      "name": "disk_volume",
      "provider": "module.gitlab.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "base_volume_id": "/u01/data/virt-u01/gitlab-base",
            "base_volume_name": null,
            "base_volume_pool": null,
            "format": "qcow2",
            "id": "/u01/data/virt-u01/gitlab-0-disk",
            "name": "gitlab-0-disk",
            "pool": "virt-u01",
            "size": 32212254720,
            "source": null,
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.gitlab.libvirt_volume.ubuntu-qcow2"
          ]
        }
      ]
    },
    {
      "module": "module.gitlab",
      "mode": "managed",
      "type": "libvirt_volume",
      "name": "ubuntu-qcow2",
      "provider": "module.gitlab.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base_volume_id": null,
            "base_volume_name": null,
            "base_volume_pool": null,
            "format": "qcow2",
            "id": "/u01/data/virt-u01/gitlab-base",
            "name": "gitlab-base",
            "pool": "virt-u01",
            "size": 2361393152,
            "source": "/u01/os_images/jammy-server-cloudimg-amd64.img",
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.k8smaster",
      "mode": "data",
      "type": "template_file",
      "name": "network_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "f9fffade94480c5e803cd15c14b63e65b5cd935e5d408f1bd31edf34c8affe3d",
            "rendered": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "template": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "vars": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.k8smaster",
      "mode": "data",
      "type": "template_file",
      "name": "user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "bd43805fb68bd8b1a80d9097124f087b771457f9aef7a6063fcf856008e84464",
            "rendered": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: k8s-master-0\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf",
            "template": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: ${vm_name}-${count_index}\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf",
            "vars": {
              "count_index": "0",
              "vm_name": "k8s-master"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.k8smaster",
      "mode": "managed",
      "type": "libvirt_cloudinit_disk",
      "name": "commoninit",
      "provider": "module.k8smaster.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "/u01/data/virt-u01/commoninit-k8s-master-0.iso;a787b66e-b52a-4ed9-bb49-fd9f014e29c6",
            "meta_data": "",
            "name": "commoninit-k8s-master-0.iso",
            "network_config": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "pool": "virt-u01",
            "user_data": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: k8s-master-0\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.k8smaster.data.template_file.network_config",
            "module.k8smaster.data.template_file.user_data"
          ]
        }
      ]
    },
    {
      "module": "module.k8smaster",
      "mode": "managed",
      "type": "libvirt_domain",
      "name": "domain-ubuntu",
      "provider": "module.k8smaster.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arch": "x86_64",
            "autostart": false,
            "boot_device": [],
            "cloudinit": "/u01/data/virt-u01/commoninit-k8s-master-0.iso;a787b66e-b52a-4ed9-bb49-fd9f014e29c6",
            "cmdline": [],
            "console": [
              {
                "source_host": "127.0.0.1",
                "source_path": "",
                "source_service": "0",
                "target_port": "0",
                "target_type": "serial",
                "type": "pty"
              },
              {
                "source_host": "127.0.0.1",
                "source_path": "",
                "source_service": "0",
                "target_port": "1",
                "target_type": "virtio",
                "type": "pty"
              }
            ],
            "coreos_ignition": null,
            "cpu": [
              {
                "mode": "custom"
              }
            ],
            "description": "",
            "disk": [
              {
                "block_device": "",
                "file": "",
                "scsi": false,
                "url": "",
                "volume_id": "/u01/data/virt-u01/k8s-master-0-disk",
                "wwn": ""
              }
            ],
            "emulator": "/usr/bin/qemu-system-x86_64",
            "filesystem": [],
            "firmware": null,
            "fw_cfg_name": "opt/com.coreos/config",
            "graphics": [],
            "id": "ce24589e-ea71-4e98-a7cb-788dd3415467",
            "initrd": "",
            "kernel": "",
            "machine": "pc",
            "memory": 4096,
            "metadata": null,
            "name": "k8s-master-0",
            "network_interface": [
              {
                "addresses": [
                  "192.168.122.126"
                ],
                "bridge": "",
                "hostname": "k8s-master",
                "mac": "52:54:00:9A:0B:17",
                "macvtap": "",
                "network_id": "b7189a86-a35e-44d9-80e9-3dff3fb23aff",
                "network_name": "default",
                "passthrough": "",
                "vepa": "",
                "wait_for_lease": true
              }
            ],
            "nvram": [],
            "qemu_agent": false,
            "running": true,
            "timeouts": null,
            "tpm": [],
            "type": "kvm",
            "vcpu": 2,
            "video": [],
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.k8smaster.data.template_file.network_config",
            "module.k8smaster.data.template_file.user_data",
            "module.k8smaster.libvirt_cloudinit_disk.commoninit",
            "module.k8smaster.libvirt_volume.disk_volume",
            "module.k8smaster.libvirt_volume.ubuntu-qcow2"
          ]
        }
      ]
    },
    {
      "module": "module.k8smaster",
      "mode": "managed",
      "type": "libvirt_volume",
      "name": "disk_volume",
      "provider": "module.k8smaster.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "base_volume_id": "/u01/data/virt-u01/k8s-master-base",
            "base_volume_name": null,
            "base_volume_pool": null,
            "format": "qcow2",
            "id": "/u01/data/virt-u01/k8s-master-0-disk",
            "name": "k8s-master-0-disk",
            "pool": "virt-u01",
            "size": 10737418240,
            "source": null,
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.k8smaster.libvirt_volume.ubuntu-qcow2"
          ]
        }
      ]
    },
    {
      "module": "module.k8smaster",
      "mode": "managed",
      "type": "libvirt_volume",
      "name": "ubuntu-qcow2",
      "provider": "module.k8smaster.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base_volume_id": null,
            "base_volume_name": null,
            "base_volume_pool": null,
            "format": "qcow2",
            "id": "/u01/data/virt-u01/k8s-master-base",
            "name": "k8s-master-base",
            "pool": "virt-u01",
            "size": 2361393152,
            "source": "/u01/os_images/jammy-server-cloudimg-amd64.img",
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.k8sworker",
      "mode": "data",
      "type": "template_file",
      "name": "network_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "f9fffade94480c5e803cd15c14b63e65b5cd935e5d408f1bd31edf34c8affe3d",
            "rendered": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "template": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "vars": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.k8sworker",
      "mode": "data",
      "type": "template_file",
      "name": "user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "43d6478563655bd40df340796b1b0951fec3b466bfec839bf553abf28e9e63f3",
            "rendered": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: k8s-worker-0\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf",
            "template": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: ${vm_name}-${count_index}\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf",
            "vars": {
              "count_index": "0",
              "vm_name": "k8s-worker"
            }
          },
          "sensitive_attributes": []
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "b11a9d32bffe8cfdb9d0cf2ac38b3a347b4c9b62cce028940fea3349a4a82ffc",
            "rendered": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: k8s-worker-1\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf",
            "template": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: ${vm_name}-${count_index}\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf",
            "vars": {
              "count_index": "1",
              "vm_name": "k8s-worker"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.k8sworker",
      "mode": "managed",
      "type": "libvirt_cloudinit_disk",
      "name": "commoninit",
      "provider": "module.k8sworker.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "/u01/data/virt-u01/commoninit-k8s-worker-0.iso;52a327ca-4f50-4fcf-afce-25513daf79d9",
            "meta_data": "",
            "name": "commoninit-k8s-worker-0.iso",
            "network_config": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "pool": "virt-u01",
            "user_data": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: k8s-worker-0\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.k8sworker.data.template_file.network_config",
            "module.k8sworker.data.template_file.user_data"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "id": "/u01/data/virt-u01/commoninit-k8s-worker-1.iso;1c88bdfd-f4e3-4095-bbc2-c19a451caeca",
            "meta_data": "",
            "name": "commoninit-k8s-worker-1.iso",
            "network_config": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "pool": "virt-u01",
            "user_data": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: k8s-worker-1\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.k8sworker.data.template_file.network_config",
            "module.k8sworker.data.template_file.user_data"
          ]
        }
      ]
    },
    {
      "module": "module.k8sworker",
      "mode": "managed",
      "type": "libvirt_domain",
      "name": "domain-ubuntu",
      "provider": "module.k8sworker.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arch": "x86_64",
            "autostart": false,
            "boot_device": [],
            "cloudinit": "/u01/data/virt-u01/commoninit-k8s-worker-0.iso;52a327ca-4f50-4fcf-afce-25513daf79d9",
            "cmdline": [],
            "console": [
              {
                "source_host": "127.0.0.1",
                "source_path": "",
                "source_service": "0",
                "target_port": "0",
                "target_type": "serial",
                "type": "pty"
              },
              {
                "source_host": "127.0.0.1",
                "source_path": "",
                "source_service": "0",
                "target_port": "1",
                "target_type": "virtio",
                "type": "pty"
              }
            ],
            "coreos_ignition": null,
            "cpu": [
              {
                "mode": "custom"
              }
            ],
            "description": "",
            "disk": [
              {
                "block_device": "",
                "file": "",
                "scsi": false,
                "url": "",
                "volume_id": "/u01/data/virt-u01/k8s-worker-0-disk",
                "wwn": ""
              }
            ],
            "emulator": "/usr/bin/qemu-system-x86_64",
            "filesystem": [],
            "firmware": null,
            "fw_cfg_name": "opt/com.coreos/config",
            "graphics": [],
            "id": "b0a5bf26-0176-4cb9-93bf-e7a797e4b6e2",
            "initrd": "",
            "kernel": "",
            "machine": "pc",
            "memory": 8192,
            "metadata": null,
            "name": "k8s-worker-0",
            "network_interface": [
              {
                "addresses": [
                  "192.168.122.96"
                ],
                "bridge": "",
                "hostname": "k8s-worker",
                "mac": "52:54:00:DA:8C:61",
                "macvtap": "",
                "network_id": "b7189a86-a35e-44d9-80e9-3dff3fb23aff",
                "network_name": "default",
                "passthrough": "",
                "vepa": "",
                "wait_for_lease": true
              }
            ],
            "nvram": [],
            "qemu_agent": false,
            "running": true,
            "timeouts": null,
            "tpm": [],
            "type": "kvm",
            "vcpu": 4,
            "video": [],
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.k8sworker.data.template_file.network_config",
            "module.k8sworker.data.template_file.user_data",
            "module.k8sworker.libvirt_cloudinit_disk.commoninit",
            "module.k8sworker.libvirt_volume.disk_volume",
            "module.k8sworker.libvirt_volume.ubuntu-qcow2"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "arch": "x86_64",
            "autostart": false,
            "boot_device": [],
            "cloudinit": "/u01/data/virt-u01/commoninit-k8s-worker-1.iso;1c88bdfd-f4e3-4095-bbc2-c19a451caeca",
            "cmdline": [],
            "console": [
              {
                "source_host": "127.0.0.1",
                "source_path": "",
                "source_service": "0",
                "target_port": "0",
                "target_type": "serial",
                "type": "pty"
              },
              {
                "source_host": "127.0.0.1",
                "source_path": "",
                "source_service": "0",
                "target_port": "1",
                "target_type": "virtio",
                "type": "pty"
              }
            ],
            "coreos_ignition": null,
            "cpu": [
              {
                "mode": "custom"
              }
            ],
            "description": "",
            "disk": [
              {
                "block_device": "",
                "file": "",
                "scsi": false,
                "url": "",
                "volume_id": "/u01/data/virt-u01/k8s-worker-1-disk",
                "wwn": ""
              }
            ],
            "emulator": "/usr/bin/qemu-system-x86_64",
            "filesystem": [],
            "firmware": null,
            "fw_cfg_name": "opt/com.coreos/config",
            "graphics": [],
            "id": "013e5d0a-1d8b-4fce-ba64-5b9d8dadd62e",
            "initrd": "",
            "kernel": "",
            "machine": "pc",
            "memory": 8192,
            "metadata": null,
            "name": "k8s-worker-1",
            "network_interface": [
              {
                "addresses": [
                  "192.168.122.133"
                ],
                "bridge": "",
                "hostname": "k8s-worker",
                "mac": "52:54:00:16:BF:53",
                "macvtap": "",
                "network_id": "b7189a86-a35e-44d9-80e9-3dff3fb23aff",
                "network_name": "default",
                "passthrough": "",
                "vepa": "",
                "wait_for_lease": true
              }
            ],
            "nvram": [],
            "qemu_agent": false,
            "running": true,
            "timeouts": null,
            "tpm": [],
            "type": "kvm",
            "vcpu": 4,
            "video": [],
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.k8sworker.data.template_file.network_config",
            "module.k8sworker.data.template_file.user_data",
            "module.k8sworker.libvirt_cloudinit_disk.commoninit",
            "module.k8sworker.libvirt_volume.disk_volume",
            "module.k8sworker.libvirt_volume.ubuntu-qcow2"
          ]
        }
      ]
    },
    {
      "module": "module.k8sworker",
      "mode": "managed",
      "type": "libvirt_volume",
      "name": "disk_volume",
      "provider": "module.k8sworker.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "base_volume_id": "/u01/data/virt-u01/k8s-worker-base",
            "base_volume_name": null,
            "base_volume_pool": null,
            "format": "qcow2",
            "id": "/u01/data/virt-u01/k8s-worker-0-disk",
            "name": "k8s-worker-0-disk",
            "pool": "virt-u01",
            "size": 21474836480,
            "source": null,
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.k8sworker.libvirt_volume.ubuntu-qcow2"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "base_volume_id": "/u01/data/virt-u01/k8s-worker-base",
            "base_volume_name": null,
            "base_volume_pool": null,
            "format": "qcow2",
            "id": "/u01/data/virt-u01/k8s-worker-1-disk",
            "name": "k8s-worker-1-disk",
            "pool": "virt-u01",
            "size": 21474836480,
            "source": null,
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.k8sworker.libvirt_volume.ubuntu-qcow2"
          ]
        }
      ]
    },
    {
      "module": "module.k8sworker",
      "mode": "managed",
      "type": "libvirt_volume",
      "name": "ubuntu-qcow2",
      "provider": "module.k8sworker.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base_volume_id": null,
            "base_volume_name": null,
            "base_volume_pool": null,
            "format": "qcow2",
            "id": "/u01/data/virt-u01/k8s-worker-base",
            "name": "k8s-worker-base",
            "pool": "virt-u01",
            "size": 2361393152,
            "source": "/u01/os_images/jammy-server-cloudimg-amd64.img",
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "data",
      "type": "template_file",
      "name": "network_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "f9fffade94480c5e803cd15c14b63e65b5cd935e5d408f1bd31edf34c8affe3d",
            "rendered": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "template": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "vars": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "data",
      "type": "template_file",
      "name": "user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "774a9aa0c7901703894a1cd3c87d76c32145e0909701cfd93e7636c90b8ed859",
            "rendered": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: keycloak-server-0\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf",
            "template": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: ${vm_name}-${count_index}\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf",
            "vars": {
              "count_index": "0",
              "vm_name": "keycloak-server"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "libvirt_cloudinit_disk",
      "name": "commoninit",
      "provider": "module.keycloak.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "/u01/data/virt-u01/commoninit-keycloak-server-0.iso;98ca4052-85b2-487d-934e-ed506c8a5133",
            "meta_data": "",
            "name": "commoninit-keycloak-server-0.iso",
            "network_config": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "pool": "virt-u01",
            "user_data": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: keycloak-server-0\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.keycloak.data.template_file.network_config",
            "module.keycloak.data.template_file.user_data"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "libvirt_domain",
      "name": "domain-ubuntu",
      "provider": "module.keycloak.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arch": "x86_64",
            "autostart": false,
            "boot_device": [],
            "cloudinit": "/u01/data/virt-u01/commoninit-keycloak-server-0.iso;98ca4052-85b2-487d-934e-ed506c8a5133",
            "cmdline": [],
            "console": [
              {
                "source_host": "127.0.0.1",
                "source_path": "",
                "source_service": "0",
                "target_port": "0",
                "target_type": "serial",
                "type": "pty"
              },
              {
                "source_host": "127.0.0.1",
                "source_path": "",
                "source_service": "0",
                "target_port": "1",
                "target_type": "virtio",
                "type": "pty"
              }
            ],
            "coreos_ignition": null,
            "cpu": [
              {
                "mode": "custom"
              }
            ],
            "description": "",
            "disk": [
              {
                "block_device": "",
                "file": "",
                "scsi": false,
                "url": "",
                "volume_id": "/u01/data/virt-u01/keycloak-server-0-disk",
                "wwn": ""
              }
            ],
            "emulator": "/usr/bin/qemu-system-x86_64",
            "filesystem": [],
            "firmware": null,
            "fw_cfg_name": "opt/com.coreos/config",
            "graphics": [],
            "id": "52d53ee0-65e2-4de7-b385-a00d117a582a",
            "initrd": "",
            "kernel": "",
            "machine": "pc",
            "memory": 8192,
            "metadata": null,
            "name": "keycloak-server-0",
            "network_interface": [
              {
                "addresses": [
                  "192.168.122.242"
                ],
                "bridge": "",
                "hostname": "keycloak-server",
                "mac": "52:54:00:66:DA:79",
                "macvtap": "",
                "network_id": "b7189a86-a35e-44d9-80e9-3dff3fb23aff",
                "network_name": "default",
                "passthrough": "",
                "vepa": "",
                "wait_for_lease": true
              }
            ],
            "nvram": [],
            "qemu_agent": false,
            "running": true,
            "timeouts": null,
            "tpm": [],
            "type": "kvm",
            "vcpu": 2,
            "video": [],
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.keycloak.data.template_file.network_config",
            "module.keycloak.data.template_file.user_data",
            "module.keycloak.libvirt_cloudinit_disk.commoninit",
            "module.keycloak.libvirt_volume.disk_volume",
            "module.keycloak.libvirt_volume.ubuntu-qcow2"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "libvirt_volume",
      "name": "disk_volume",
      "provider": "module.keycloak.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "base_volume_id": "/u01/data/virt-u01/keycloak-server-base",
            "base_volume_name": null,
            "base_volume_pool": null,
            "format": "qcow2",
            "id": "/u01/data/virt-u01/keycloak-server-0-disk",
            "name": "keycloak-server-0-disk",
            "pool": "virt-u01",
            "size": 21474836480,
            "source": null,
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.keycloak.libvirt_volume.ubuntu-qcow2"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "libvirt_volume",
      "name": "ubuntu-qcow2",
      "provider": "module.keycloak.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base_volume_id": null,
            "base_volume_name": null,
            "base_volume_pool": null,
            "format": "qcow2",
            "id": "/u01/data/virt-u01/keycloak-server-base",
            "name": "keycloak-server-base",
            "pool": "virt-u01",
            "size": 2361393152,
            "source": "/u01/os_images/jammy-server-cloudimg-amd64.img",
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.minio",
      "mode": "data",
      "type": "template_file",
      "name": "network_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "f9fffade94480c5e803cd15c14b63e65b5cd935e5d408f1bd31edf34c8affe3d",
            "rendered": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "template": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "vars": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.minio",
      "mode": "data",
      "type": "template_file",
      "name": "user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "1bd70d443796a59552ee5f924b9139bc2aedfb3b3fab96e05506f5e24121dd89",
            "rendered": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: minio-0\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf",
            "template": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: ${vm_name}-${count_index}\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf",
            "vars": {
              "count_index": "0",
              "vm_name": "minio"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.minio",
      "mode": "managed",
      "type": "libvirt_cloudinit_disk",
      "name": "commoninit",
      "provider": "module.minio.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "/u01/data/virt-u01/commoninit-minio-0.iso;583d1c61-26f1-4747-9f87-60452ca02bd3",
            "meta_data": "",
            "name": "commoninit-minio-0.iso",
            "network_config": "version: 2\nethernets:\n  eth0:\n    match:\n      name: en*\n    dhcp4: true\n    optional: true\n    gateway4: 192.168.122.1\n    nameservers: \n      addresses: [192.168.122.1]",
            "pool": "virt-u01",
            "user_data": "#cloud-config\n# Add groups to the system\n# The following example adds the 'admingroup' group with members 'root' and 'sys'\n# and the empty group cloud-users.\ngroups:\n  - admingroup: [root,sys,user01]\n  - cloud-users\n\n# Add users to the system. Users are added after groups are added.\n# Note: Most of these configuration options will not be honored if the user\n#       already exists. Following options are the exceptions and they are\n#       applicable on already-existing users:\n#       - 'plain_text_passwd', 'hashed_passwd', 'lock_passwd', 'sudo',\n#         'ssh_authorized_keys', 'ssh_redirect_user'.\nusers:\n  - default\n  - name: user01\n    gecos: user01\n    shell: /bin/bash\n    primary_group: user01\n    groups: users, admingroup\n    lock_passwd: false\n    passwd: $6$xev1Hc0uWt9yH756$rE2bEMCoCrCaergoHWqEyArFNRLC2e3oDYdGY0/7o5Yi.Xrxbr/k4uYv5CqStAmPWhZnTKncCjdpSl2dJPpEZ0\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDC3VgBN3LdE3dMEJbrq9+V3GwvN1eKHRoa8pXY0u6w2b8+5w/vgA9r5zfXVXqG85kny7FKE5zFj9eR7da8tn3nuRoTy08U5pOdpq5nHadVZ1iOU0rMME8ytQAcWhzERBaU8N/3G2v3PxCl6TicFQ82Y164/VuWTfO6Kvv6u91ID8HSKlCXxLoitlD0nBbblkfBO1Tf6abDBc1b2Er2y4nzPoOdzuCxWiAZ59F14IaDfrnYJbRrJFPDxXYs9csk9l25MKycLKJGkeJIg2WyLjqKPSm4ezVlU1wT6AEGynf6r7MYPv5h1XFgNkqD/l5B+QVueek9s5zUqOMNCVb7/4wAwzCregr6dnqo9J+FQff2fpXAafEywlQvv5CksrwCDXnHpe8K8MLrucVsz59mKnGPINJbjwaro+qsKSRlNlJPMx807b+2lIeNEob9MDTmHVwtKsfXwbNXXj/Vk8JVLMwrJNYIrKgtmmlD51l7nf8sItEHnzgR8uNNLU0WcRQxGe8= lampt@lamptz420\n#   - name: barfoo\n#     gecos: Bar B. Foo\n#     sudo: ALL=(ALL) NOPASSWD:ALL\n#     groups: users, admingroup\n#     lock_passwd: true\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - name: testuser\n#     gecos: Mr. Test\n#     homedir: /local/testdir\n#     sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#   - name: cloudy\n#     gecos: Magic Cloud App Daemon User\n#     inactive: '5'\n#     system: true\n#   - name: fizzbuzz\n#     sudo: false\n#     shell: /bin/bash\n#     ssh_authorized_keys:\n#       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj8cgWyIOaspgKdVy0cKJ+UTjfv7jBOjG2H/GN8bJVXy72XAvnhM0dUM+CCs8FOf0YlPX+Frvz2hKInrmRhZVwRSL129PasD12MlI3l44u6IwS1o/W86Q+tkQYEljtqDOo0a+cOsaZkvUNzUyEXUwz/lmYa6G4hMKZH4NBj7nbAAF96wsMCoyNwbWryBnDYUr6wMbjRR1J9Pw7Xh7WRC73wy4Va2YuOgbD3V/5ZrFPLbWZW/7TFXVrql04QVbyei4aiFR5n//GvoqwQDNe58LmbzX/xvxyKJYdny2zXmdAhMxbrpFQsfpkJ9E/H5w0yOdSvnWbUoG5xNGoOB csmith@fringe\n#   - snapuser: joe@joeuser.io\n#   - name: nosshlogins\n#     ssh_redirect_user: true\n\n# Valid Values:\n#   name: The user's login name\n#   expiredate: Date on which the user's account will be disabled.\n#   gecos: The user name's real name, i.e. \"Bob B. Smith\"\n#   homedir: Optional. Set to the local path you want to use. Defaults to\n#           /home/\u003cusername\u003e\n#   primary_group: define the primary group. Defaults to a new group created\n#           named after the user.\n#   groups:  Optional. Additional groups to add the user to. Defaults to none\n#   selinux_user:  Optional. The SELinux user for the user's login, such as\n#           \"staff_u\". When this is omitted the system will select the default\n#           SELinux user.\n#   lock_passwd: Defaults to true. Lock the password to disable password login\n#   inactive: Number of days after password expires until account is disabled\n#   passwd: The hash -- not the password itself -- of the password you want\n#           to use for this user. You can generate a hash via:\n#               mkpasswd --method=SHA-512 --rounds=4096\n#           (the above command would create from stdin an SHA-512 password hash\n#           with 4096 salt rounds)\n#\n#           Please note: while the use of a hashed password is better than\n#               plain text, the use of this feature is not ideal. Also,\n#               using a high number of salting rounds will help, but it should\n#               not be relied upon.\n#\n#               To highlight this risk, running John the Ripper against the\n#               example hash above, with a readily available wordlist, revealed\n#               the true password in 12 seconds on a i7-2620QM.\n#\n#               In other words, this feature is a potential security risk and is\n#               provided for your convenience only. If you do not fully trust the\n#               medium over which your cloud-config will be transmitted, then you\n#               should not use this feature.\n#\n#   no_create_home: When set to true, do not create home directory.\n#   no_user_group: When set to true, do not create a group named after the user.\n#   no_log_init: When set to true, do not initialize lastlog and faillog database.\n#   ssh_import_id: Optional. Import SSH ids\n#   ssh_authorized_keys: Optional. [list] Add keys to user's authorized keys file\n#                        An error will be raised if no_create_home or system is\n#                        also set.\n#   ssh_redirect_user: Optional. [bool] Set true to block ssh logins for cloud\n#       ssh public keys and emit a message redirecting logins to\n#       use \u003cdefault_username\u003e instead. This option only disables cloud\n#       provided public-keys. An error will be raised if ssh_authorized_keys\n#       or ssh_import_id is provided for the same user.\n#\n#   sudo: Defaults to none. Accepts a sudo rule string, a list of sudo rule\n#         strings or False to explicitly deny sudo usage. Examples:\n#\n#         Allow a user unrestricted sudo access.\n#             sudo:  ALL=(ALL) NOPASSWD:ALL\n#                       or\n#             sudo: [\"ALL=(ALL) NOPASSWD:ALL\"]\n#\n#         Adding multiple sudo rule strings.\n#             sudo:\n#               - ALL=(ALL) NOPASSWD:/bin/mysql\n#               - ALL=(ALL) ALL\n#\n#         Prevent sudo access for a user.\n#             sudo: False\n#\n#         Note: Please double check your syntax and make sure it is valid.\n#               cloud-init does not parse/check the syntax of the sudo\n#               directive.\n#   system: Create the user as a system user. This means no home directory.\n#   snapuser: Create a Snappy (Ubuntu-Core) user via the snap create-user\n#             command available on Ubuntu systems.  If the user has an account\n#             on the Ubuntu SSO, specifying the email will allow snap to\n#             request a username and any public ssh keys and will import\n#             these into the system with username specified by SSO account.\n#             If 'username' is not set in SSO, then username will be the\n#             shortname before the email domain.\n#\n\n# Default user creation:\n#\n# Unless you define users, you will get a 'ubuntu' user on Ubuntu systems with the\n# legacy permission (no password sudo, locked user, etc). If however, you want\n# to have the 'ubuntu' user in addition to other users, you need to instruct\n# cloud-init that you also want the default user. To do this use the following\n# syntax:\n#   users:\n#     - default\n#     - bob\n#     - ....\n#  foobar: ...\n#\n# users[0] (the first user in users) overrides the user directive.\n#\n# The 'default' user above references the distro's config set in\n# /etc/cloud/cloud.cfg.\n\n# Set the hostname\nhostname: minio-0\n\n# Install packages\npackages:\n  - openssh-server\n\n# Config auto login\nwrite_files:\n  - path: /etc/systemd/system/getty@tty1.service.d/override.conf\n    permissions: '0644'\n    content: |\n      [Service]\n      Type=simple\n      ExecStart=\n      ExecStart=-/sbin/agetty --autologin user01 --noclear %I \\$TERM\n\n# Run commands on first boot\nruncmd:\n  - systemctl daemon-reload\n  - systemctl restart getty@tty1.service\n  - swapoff -a\n  - echo \"* - nofile 65535\" \u003e\u003e /etc/security/limits.conf"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.minio.data.template_file.network_config",
            "module.minio.data.template_file.user_data"
          ]
        }
      ]
    },
    {
      "module": "module.minio",
      "mode": "managed",
      "type": "libvirt_domain",
      "name": "domain-ubuntu",
      "provider": "module.minio.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arch": "x86_64",
            "autostart": false,
            "boot_device": [],
            "cloudinit": "/u01/data/virt-u01/commoninit-minio-0.iso;583d1c61-26f1-4747-9f87-60452ca02bd3",
            "cmdline": null,
            "console": [
              {
                "source_host": "127.0.0.1",
                "source_path": "",
                "source_service": "0",
                "target_port": "0",
                "target_type": "serial",
                "type": "pty"
              },
              {
                "source_host": "127.0.0.1",
                "source_path": "",
                "source_service": "0",
                "target_port": "1",
                "target_type": "virtio",
                "type": "pty"
              }
            ],
            "coreos_ignition": null,
            "cpu": [
              {
                "mode": "custom"
              }
            ],
            "description": "",
            "disk": [
              {
                "block_device": "",
                "file": "",
                "scsi": false,
                "url": "",
                "volume_id": "/u01/data/virt-u01/minio-0-disk",
                "wwn": ""
              }
            ],
            "emulator": "/usr/bin/qemu-system-x86_64",
            "filesystem": [],
            "firmware": null,
            "fw_cfg_name": "opt/com.coreos/config",
            "graphics": [],
            "id": "6d0769cb-6437-46dd-9f71-85f69bd260b0",
            "initrd": "",
            "kernel": "",
            "machine": "pc",
            "memory": 4096,
            "metadata": null,
            "name": "minio-0",
            "network_interface": [
              {
                "addresses": [
                  "192.168.122.227"
                ],
                "bridge": "",
                "hostname": "minio",
                "mac": "52:54:00:3A:CA:72",
                "macvtap": "",
                "network_id": "b7189a86-a35e-44d9-80e9-3dff3fb23aff",
                "network_name": "default",
                "passthrough": "",
                "vepa": "",
                "wait_for_lease": true
              }
            ],
            "nvram": null,
            "qemu_agent": false,
            "running": true,
            "timeouts": null,
            "tpm": [],
            "type": "kvm",
            "vcpu": 2,
            "video": [],
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.minio.data.template_file.network_config",
            "module.minio.data.template_file.user_data",
            "module.minio.libvirt_cloudinit_disk.commoninit",
            "module.minio.libvirt_volume.disk_volume",
            "module.minio.libvirt_volume.ubuntu-qcow2"
          ]
        }
      ]
    },
    {
      "module": "module.minio",
      "mode": "managed",
      "type": "libvirt_volume",
      "name": "disk_volume",
      "provider": "module.minio.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "base_volume_id": "/u01/data/virt-u01/minio-base",
            "base_volume_name": null,
            "base_volume_pool": null,
            "format": "qcow2",
            "id": "/u01/data/virt-u01/minio-0-disk",
            "name": "minio-0-disk",
            "pool": "virt-u01",
            "size": 10737418240,
            "source": null,
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.minio.libvirt_volume.ubuntu-qcow2"
          ]
        }
      ]
    },
    {
      "module": "module.minio",
      "mode": "managed",
      "type": "libvirt_volume",
      "name": "ubuntu-qcow2",
      "provider": "module.minio.provider[\"registry.terraform.io/dmacvicar/libvirt\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base_volume_id": null,
            "base_volume_name": null,
            "base_volume_pool": null,
            "format": "qcow2",
            "id": "/u01/data/virt-u01/minio-base",
            "name": "minio-base",
            "pool": "virt-u01",
            "size": 2361393152,
            "source": "/u01/os_images/jammy-server-cloudimg-amd64.img",
            "xml": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    }
  ],
  "check_results": [
    {
      "object_kind": "var",
      "config_addr": "module.k8sworker.var.number_of_vms",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.k8sworker.var.number_of_vms",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.minio.var.vm_vcpu",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.minio.var.vm_vcpu",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.gitlab.var.vm_memory",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.gitlab.var.vm_memory",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.keycloak.var.vm_disk_size",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.keycloak.var.vm_disk_size",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.gitlab.var.number_of_vms",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.gitlab.var.number_of_vms",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "var.number_of_vms",
      "status": "pass",
      "objects": [
        {
          "object_addr": "var.number_of_vms",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "var.vm_disk_size",
      "status": "pass",
      "objects": [
        {
          "object_addr": "var.vm_disk_size",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "var.vm_vcpu",
      "status": "pass",
      "objects": [
        {
          "object_addr": "var.vm_vcpu",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.k8smaster.var.vm_memory",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.k8smaster.var.vm_memory",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.keycloak.var.vm_memory",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.keycloak.var.vm_memory",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.k8smaster.var.vm_disk_size",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.k8smaster.var.vm_disk_size",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.minio.var.number_of_vms",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.minio.var.number_of_vms",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.gitlab.var.vm_disk_size",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.gitlab.var.vm_disk_size",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.k8sworker.var.vm_disk_size",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.k8sworker.var.vm_disk_size",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "var.vm_memory",
      "status": "pass",
      "objects": [
        {
          "object_addr": "var.vm_memory",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.minio.var.vm_disk_size",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.minio.var.vm_disk_size",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.k8smaster.var.number_of_vms",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.k8smaster.var.number_of_vms",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.k8sworker.var.vm_vcpu",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.k8sworker.var.vm_vcpu",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.keycloak.var.vm_vcpu",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.keycloak.var.vm_vcpu",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.minio.var.vm_memory",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.minio.var.vm_memory",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.k8smaster.var.vm_vcpu",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.k8smaster.var.vm_vcpu",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.keycloak.var.number_of_vms",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.keycloak.var.number_of_vms",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.gitlab.var.vm_vcpu",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.gitlab.var.vm_vcpu",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.k8sworker.var.vm_memory",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.k8sworker.var.vm_memory",
          "status": "pass"
        }
      ]
    }
  ]
}
